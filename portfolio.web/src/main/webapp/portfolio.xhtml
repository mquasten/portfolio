<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Portfolio</title>
	
	
<f:metadata>
    <f:viewParam name="portfolioId" value="#{sharePortfolio.id}" />
   <f:viewAction action="#{portfolioController.init(sharePortfolio)}" />
    
</f:metadata>
	
	<h:outputStylesheet library="css" name="style.css"  />
</h:head>
<h:body>
<h1>Portfolio anlegen </h1>

<h:form>

<h:panelGrid columns="2" style="margin-bottom: 25px;">
	<p:outputLabel  for="name"  value="Name"   />
	
	<h:panelGrid columns="2">
	<p:inputText id="name" value="#{sharePortfolio.name}" required="true"  validatorMessage="5 bis 30 Zeichen [Buchstaben,Ziffern-_]" requiredMessage="Mußfeld"  >
	
	<f:validateRegex pattern="[a-z,A-Z,0-9-_]{5,30}"  />
	
	</p:inputText >
	<p:message for="name"  /> 
	
	
	</h:panelGrid>
	
	<p:outputLabel  for="variances"  value="σ [%]"  rendered="#{sharePortfolio.standardDeviations.size() > 0}" />
	
	<p:dataTable id="variances"  emptyMessage=""    var="portfolio" value="#{sharePortfolio.standardDeviations}"  styleClass="hide-column-names"  rendered="#{sharePortfolio.standardDeviations.size() > 0}" >
	 	<p:column>
            <h:outputText value="#{portfolio.key}" />
        </p:column>
        
        <p:column>
            <h:outputText value="#{100*portfolio.value}" >
             <f:convertNumber pattern="#0.00" />
            </h:outputText>
        </p:column>
	
	</p:dataTable>
	
</h:panelGrid >

<h:panelGrid >
<p:messages id="messages" showDetail="false" globalOnly="true" />
<h:panelGrid columns="2" >
 	<p:button  value="abbrechen" outcome="portfolios"  />
	<p:commandButton value="speichern"  process="@form" update="@form" action="#{portfolioController.save(sharePortfolio.sharePortfolio,facesContext,'Portfolio mit diesem Namen existiert bereits')}" />
</h:panelGrid >   
</h:panelGrid >
 
        
</h:form>

	
	


</h:body>

</html>