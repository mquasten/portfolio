<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="template.xhtml">
	<ui:param name="headline" value="Wechselkurse anzeigen" />

<ui:define name="meta">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<f:metadata>
			<f:viewParam name="filter" value="#{exchangeRates.filter}" />
			<f:viewParam name="period" value="#{exchangeRates.period}" />
			<f:viewAction action="#{exchangeRateController.init()}" />

		</f:metadata>

	</ui:define>


<ui:define name="content">

<h:form> 


<p:chart type="line" model="#{exchangeRates.chartModel}"  style="height:700px"  />
		
			<h:panelGrid columns="4">

				<p:outputLabel value="Wechselkurs" />

				<p:selectOneMenu value="#{exchangeRates.filter}"  style="width: 150px;" >
					<f:selectItem itemLabel="Alle" itemValue=".*" />
					<f:selectItems value="#{exchangeRates.curves}" />
					
				</p:selectOneMenu>
				
				
				<p:selectOneMenu value="#{exchangeRates.period}"  style="width: 150px;" >
					<f:selectItem itemLabel="Alles" itemValue="99999" />
					<f:selectItem itemLabel="Jahr" 	itemValue="365" />
					<f:selectItem itemLabel="Monat" itemValue="30" />
					<f:selectItem itemLabel="Woche" itemValue="7" />
					
				</p:selectOneMenu>
				
				<p:commandButton value="anzeigen"   process="@form" update="@form"  action="#{exchangeRateController.show()}"/>

			
</h:panelGrid>
</h:form>

<h:panelGrid>

<p:dataTable id="ratesTable" var="rate"
				value="#{exchangeRates.exchangeRateRetrospectives}"  lazy="true" resizableColumns="true">
				
				<p:column>
						<f:facet name="header">
							<h:outputText value="f" />
						</f:facet>

						<h:outputText value="#{rate.name()}" />
				</p:column>
				
				
				<p:column>
						<f:facet name="header">
							<h:outputText value="T" />
						</f:facet>

						<h:outputText value="#{rate.startDate()}" >
							<f:convertDateTime type="date" dateStyle="short" />
						</h:outputText> -
						<h:outputText value="#{rate.endDate()}" >
							<f:convertDateTime type="date" dateStyle="short" />
						</h:outputText>
				</p:column>
				
				<p:column>
						<f:facet name="header">
							<h:outputText value="f(0)" />
						</f:facet>

						<h:outputText value="#{rate.startValue()}" >
						<f:convertNumber pattern="#0.0000" />
						</h:outputText>
				</p:column>
				<p:column>
						<f:facet name="header">
							<h:outputText value="f(T)" />
						</f:facet>

						<h:outputText value="#{rate.endValue()}" >
						 <f:convertNumber pattern="#0.0000" />
						</h:outputText>
				</p:column>
				
				<p:column>
						<f:facet name="header">
							<h:outputText value="Ã„nderung [%]" />
						</f:facet>

						<h:outputText value="#{100*rate.rate()}" >
						   <f:convertNumber pattern="#0.00" />
						</h:outputText>
				</p:column>


</p:dataTable>


</h:panelGrid>

</ui:define>

</ui:composition>




</html>