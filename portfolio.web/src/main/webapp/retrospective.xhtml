<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="template.xhtml">
	<ui:param name="headline" value="Retrospektive" />

<ui:define name="meta">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
			<f:metadata>
		 		<f:viewParam name="portfolioId" value="#{retrospective.portfolioId}" />
		 		<f:viewParam name="filter" value="#{retrospective.filter}" />
		 		<f:viewAction action="#{retrospectiveController.init(retrospective)}" />
  	     	</f:metadata>

	</ui:define>


<ui:define name="content">
<h:form>



<p:chart type="line" model="#{retrospective.chartModel}"  style="height:700px" />


<h:panelGrid columns="3" >
	
<p:outputLabel value="Zeifunktion fiktiver Anteil" />

<p:selectOneMenu value="#{retrospective.filter}"  style="width: 300px;" >
 <f:selectItem itemLabel="Alle" itemValue=".*"  />
  <f:selectItems value="#{retrospective.curves}"  />
</p:selectOneMenu>
<p:commandButton value="anzeigen" process="@form" update="@form" action="#{retrospectiveController.show(retrospective)}" />
	

</h:panelGrid>
 

 <h3> <h:outputText value="Wert der fiktiven Anteile in&nbsp;#{currencyConverter.convert(retrospective.currency)}" /></h3>
 <h:panelGrid columns="2" >
 
 	
 	<p:dataTable var="tcr" value="#{retrospective.timeCourseRetrospectives}"   lazy="true"    resizableColumns="true" >
 	
 	<p:column >
 	<f:facet name="header">
 	 <h:outputText value="Anteil" />
 	</f:facet> 
 	 
            <h:outputText value="#{tcr.name()}" />
        </p:column>
 	
 	
 	<p:column >
 	<f:facet name="header">
 		 <h:outputText value="#{retrospective.startDate}" >
 		  <f:convertDateTime  type="date" dateStyle="short"  />
 		 </h:outputText>
 	</f:facet>
            <h:outputText value="#{tcr.start()}" >
            	<f:convertNumber pattern="#0.00" />
            </h:outputText>
        </p:column>
 	
 	
 	<p:column>
 	<f:facet name="header">
 		<h:outputText value="#{retrospective.endDate}" >
 		  <f:convertDateTime  type="date" dateStyle="short"  />
 		 </h:outputText>
 	</f:facet>
            <h:outputText value="#{tcr.end()}" >
            	<f:convertNumber pattern="#0.00" />
            </h:outputText>
        </p:column>
      <p:column>
        <f:facet name="header">
 		<h:outputText value="Ã„nderung [%]" />
 		 
 		
 		</f:facet>
            <h:outputText value="#{tcr.rate()*100}" >
            	<f:convertNumber pattern="#0.00" />
            </h:outputText>
        </p:column>
 	</p:dataTable>
 
 </h:panelGrid>

</h:form>
	
	
</ui:define>

</ui:composition>
</html>